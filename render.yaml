services:
  # This tells Render to deploy the 'web' service from your docker-compose.yml
  - type: web
    name: multimodal-medical-diagnosis
    env: docker
    # This tells Render to use your docker-compose.yml file
    dockerContext: .
    dockerfilePath: ./Dockerfile.render # Use the optimized Dockerfile
    # Specify the instance type to ensure enough memory
    instanceType: e1-standard-2 # 2 vCPUs, 4 GB RAM
    plan: starter
    healthCheckPath: /health
    disks:
      - name: model-cache
        mountPath: /mnt/disk
        sizeGB: 2
    envVars:
      - key: FLASK_ENV
        value: production
      - key: MODEL_CACHE_DIR
        value: /mnt/disk/models_cache # Point to a subfolder on the disk
      # Add your other API keys here in the Render dashboard, not here.
